{#
/**
 * @file
 * Displays upcoming meetings from an OnBoard committee
 *
 * Available variables
 * - meetings:   Hash of meetings, indexed by date
 * - nid:        The current node ID
 * - committee:  JSON object from OnBoard containing committee information
 *
 * @see https://developers.google.com/google-apps/calendar/v3/reference/events
 * @copyright 2017 City of Bloomington, Indiana
 * @license http://www.gnu.org/licenses/agpl.txt GNU/AGPL, see LICENSE.txt
#}
<div class="events">
    {% for date, event in meetings %}
    <article>
        <header>
            <time datetime="{{ event.start }}">
                <div class="month"    >{{ event.start | date('M')}}</div>
                <div class="monthDate">{{ event.start | date('j')}}</div>
                <div class="weekday"  >{{ event.start | date('l')}}</div>
            </time>
        </header>
        <div>
            <time datetime="{{ event.start }}">
                {{  event.start | date('g:ia') }}
                to {{ event.end | date('g:ia') }}
            </time>
            <div class="summary" >{{ event.summary  }}</div>
            <div class="location">{{ event.location }}</div>
        </div>
    </article>
    {% endfor %}
</div>
<div>
    {% set year  = 'now'|date('Y') %}
    <a href="{{ path('onboard.meetingList.node-'~nid, {'node':nid, 'year':year}) }}" class="button">Meetings</a>
    <a href="https://calendar.google.com/calendar/embed?src={{ calendarId }}&ctz=America/New_York" class="button">Calendar</a>
    {% if committee.info.videoArchive %}
    <a href="{{ committee.info.videoArchive }}" class="button">Videos</a>
    {% endif %}
    {% if committee.info.legislative %}
    <a href="{{ path('onboard.legislationTypes.node-'~nid, {'node': nid}) }}" class="button">Legislation</a>
    {% endif %}
</div>
